<!DOCTYPE html>
<html lang="en"><head>
<script src="tidyr_basics_files/libs/clipboard/clipboard.min.js"></script>
<script src="tidyr_basics_files/libs/quarto-html/tabby.min.js"></script>
<script src="tidyr_basics_files/libs/quarto-html/popper.min.js"></script>
<script src="tidyr_basics_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="tidyr_basics_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="tidyr_basics_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="tidyr_basics_files/libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.7.32">

  <meta name="dcterms.date" content="2025-08-09">
  <title>Tidying Data</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="tidyr_basics_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="tidyr_basics_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="tidyr_basics_files/libs/revealjs/dist/theme/quarto-0e215b1d0b119f822379d859800dff50.css">
  <link href="tidyr_basics_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="tidyr_basics_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="tidyr_basics_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="tidyr_basics_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-color="#23373B" data-color="#EDEEF" class="quarto-title-block center">
  <h1 class="title">Tidying Data</h1>
  <p class="subtitle">tidyr</p>

<div class="quarto-title-authors">
</div>

  <p class="date">2025-08-09</p>
</section>
<section id="tidyr" class="slide level2">
<h2><strong>tidyr</strong></h2>
<!--
TODO: Update the art slide when Allison makes a pivot version

::: {.cell layout-align="center"}
::: {.cell-output-display}
![](img/tidyr_spread_gather.png){fig-align='center' width=70% height=70%}
:::
:::

::: {style="text-align: right;"}
Art by Allison Horst
:::
-->
<p><img data-src="img/tidyr.png" class="absolute" style="top: 0px; right: 0px; width: 140px; "></p>
<div class="large">
<p>Functions for tidying data.</p>
<p>What is tidy data?</p>
</div>
<div class="fragment">
<div class="extra-large">
<blockquote>
<p>‚ÄúTidy datasets are all alike, but every messy dataset is messy in its own way.‚Äù ‚Äî Hadley Wickham</p>
</blockquote>
</div>
</div>
</section>
<section id="tidy-data" class="slide level2 large">
<h2>Tidy Data</h2>

<img data-src="http://garrettgman.github.io/images/tidy-1.png" class="r-stretch"><div class="fragment">
<p>Each <strong>column</strong> is a single <em>variable</em></p>
</div>
<div class="fragment">
<p>Each <strong>row</strong> is a single <em>observation</em></p>
</div>
<div class="fragment">
<p>Each <strong>cell</strong> is a <em>value</em></p>
</div>
</section>
<section id="pivot_longer" class="slide level2">
<h2><code>pivot_longer()</code></h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href=""></a><span class="fu">pivot_longer</span>(<span class="sc">&lt;</span>DATA<span class="sc">&gt;</span>, <span class="sc">&lt;</span>NAMES TO<span class="sc">&gt;</span>, <span class="sc">&lt;</span>VALUES TO<span class="sc">&gt;</span>, <span class="sc">&lt;</span>VARIABLES<span class="sc">&gt;</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="lord-of-the-rings" class="slide level2">
<h2>Lord of the Rings</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href=""></a>lotr <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb2-2"><a href=""></a>                         <span class="sc">~</span>film,    <span class="sc">~</span>race, <span class="sc">~</span>female, <span class="sc">~</span>male,</span>
<span id="cb2-3"><a href=""></a>  <span class="st">"The Fellowship Of The Ring"</span>,    <span class="st">"Elf"</span>,   <span class="dv">1229</span>L,  <span class="dv">971</span>L,</span>
<span id="cb2-4"><a href=""></a>  <span class="st">"The Fellowship Of The Ring"</span>, <span class="st">"Hobbit"</span>,     <span class="dv">14</span>L, <span class="dv">3644</span>L,</span>
<span id="cb2-5"><a href=""></a>  <span class="st">"The Fellowship Of The Ring"</span>,    <span class="st">"Man"</span>,      <span class="dv">0</span>L, <span class="dv">1995</span>L,</span>
<span id="cb2-6"><a href=""></a>              <span class="st">"The Two Towers"</span>,    <span class="st">"Elf"</span>,    <span class="dv">331</span>L,  <span class="dv">513</span>L,</span>
<span id="cb2-7"><a href=""></a>              <span class="st">"The Two Towers"</span>, <span class="st">"Hobbit"</span>,      <span class="dv">0</span>L, <span class="dv">2463</span>L,</span>
<span id="cb2-8"><a href=""></a>              <span class="st">"The Two Towers"</span>,    <span class="st">"Man"</span>,    <span class="dv">401</span>L, <span class="dv">3589</span>L,</span>
<span id="cb2-9"><a href=""></a>      <span class="st">"The Return Of The King"</span>,    <span class="st">"Elf"</span>,    <span class="dv">183</span>L,  <span class="dv">510</span>L,</span>
<span id="cb2-10"><a href=""></a>      <span class="st">"The Return Of The King"</span>, <span class="st">"Hobbit"</span>,      <span class="dv">2</span>L, <span class="dv">2673</span>L,</span>
<span id="cb2-11"><a href=""></a>      <span class="st">"The Return Of The King"</span>,    <span class="st">"Man"</span>,    <span class="dv">268</span>L, <span class="dv">2459</span>L</span>
<span id="cb2-12"><a href=""></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="lord-of-the-rings-1" class="slide level2">
<h2>Lord of the Rings</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href=""></a>lotr</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 9 √ó 4
  film                       race   female  male
  &lt;chr&gt;                      &lt;chr&gt;   &lt;int&gt; &lt;int&gt;
1 The Fellowship Of The Ring Elf      1229   971
2 The Fellowship Of The Ring Hobbit     14  3644
3 The Fellowship Of The Ring Man         0  1995
4 The Two Towers             Elf       331   513
5 The Two Towers             Hobbit      0  2463
6 The Two Towers             Man       401  3589
7 The Return Of The King     Elf       183   510
8 The Return Of The King     Hobbit      2  2673
9 The Return Of The King     Man       268  2459</code></pre>
</div>
</div>
</section>
<section class="slide level2">

<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="img/new_data_alert_lotr.png" class="quarto-figure quarto-figure-center" style="width:100.0%;height:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="pivot_longer-1" class="slide level2">
<h2><code>pivot_longer()</code></h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb5" data-code-line-numbers="|2-6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href=""></a>lotr <span class="sc">|&gt;</span></span>
<span id="cb5-2"><a href=""></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb5-3"><a href=""></a>    <span class="at">names_to =</span> <span class="st">"sex"</span>,</span>
<span id="cb5-4"><a href=""></a>    <span class="at">values_to =</span> <span class="st">"words"</span>,</span>
<span id="cb5-5"><a href=""></a>    <span class="at">cols =</span> female<span class="sc">:</span>male</span>
<span id="cb5-6"><a href=""></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

</section>
<section id="pivot_longer-1-output" class="slide level2 output-location-slide"><h2><code>pivot_longer()</code></h2><div class="cell output-location-slide" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 18 √ó 4
   film                       race   sex    words
   &lt;chr&gt;                      &lt;chr&gt;  &lt;chr&gt;  &lt;int&gt;
 1 The Fellowship Of The Ring Elf    female  1229
 2 The Fellowship Of The Ring Elf    male     971
 3 The Fellowship Of The Ring Hobbit female    14
 4 The Fellowship Of The Ring Hobbit male    3644
 5 The Fellowship Of The Ring Man    female     0
 6 The Fellowship Of The Ring Man    male    1995
 7 The Two Towers             Elf    female   331
 8 The Two Towers             Elf    male     513
 9 The Two Towers             Hobbit female     0
10 The Two Towers             Hobbit male    2463
11 The Two Towers             Man    female   401
12 The Two Towers             Man    male    3589
13 The Return Of The King     Elf    female   183
14 The Return Of The King     Elf    male     510
15 The Return Of The King     Hobbit female     2
16 The Return Of The King     Hobbit male    2673
17 The Return Of The King     Man    female   268
18 The Return Of The King     Man    male    2459</code></pre>
</div>
</div></section><section class="slide level2">

<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="img/new_data_alert_tidyr.png" class="quarto-figure quarto-figure-center" style="width:100.0%;height:100.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="your-turn-1" class="slide level2">
<h2><em>Your Turn 1</em></h2>
<h3 id="use-pivot_longer-to-reorganize-table4a-into-three-columns-country-year-and-cases.">Use <code>pivot_longer()</code> to reorganize <code>table4a</code> into three columns: <code>country</code>, <code>year</code>, and <code>cases</code>.</h3>
</section>
<section id="your-turn-1-1" class="slide level2">
<h2><em>Your Turn 1</em></h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href=""></a>table4a <span class="sc">|&gt;</span></span>
<span id="cb7-2"><a href=""></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb7-3"><a href=""></a>    <span class="at">names_to =</span> <span class="st">"year"</span>,</span>
<span id="cb7-4"><a href=""></a>    <span class="at">values_to =</span> <span class="st">"cases"</span>,</span>
<span id="cb7-5"><a href=""></a>    <span class="at">cols =</span> <span class="sc">-</span>country</span>
<span id="cb7-6"><a href=""></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 3
  country     year   cases
  &lt;chr&gt;       &lt;chr&gt;  &lt;dbl&gt;
1 Afghanistan 1999     745
2 Afghanistan 2000    2666
3 Brazil      1999   37737
4 Brazil      2000   80488
5 China       1999  212258
6 China       2000  213766</code></pre>
</div>
</div>
</section>
<section id="pivot_wider" class="slide level2">
<h2><code>pivot_wider()</code></h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href=""></a><span class="fu">pivot_wider</span>(<span class="sc">&lt;</span>DATA<span class="sc">&gt;</span>, <span class="sc">&lt;</span>NAMES FROM<span class="sc">&gt;</span>, <span class="sc">&lt;</span>VALUES FROM<span class="sc">&gt;</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

<img data-src="img/tidyr-longer-wider.gif" class="quarto-figure quarto-figure-center r-stretch" style="width:65.0%"><p>Animation by Mara Averick</p>
</section>
<section id="pivot_wider-1" class="slide level2">
<h2><code>pivot_wider()</code></h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb10" data-code-line-numbers="|2-6|7-10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href=""></a>lotr <span class="sc">|&gt;</span></span>
<span id="cb10-2"><a href=""></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb10-3"><a href=""></a>    <span class="at">names_to =</span> <span class="st">"sex"</span>,</span>
<span id="cb10-4"><a href=""></a>    <span class="at">values_to =</span> <span class="st">"words"</span>,</span>
<span id="cb10-5"><a href=""></a>    <span class="at">cols =</span> female<span class="sc">:</span>male</span>
<span id="cb10-6"><a href=""></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb10-7"><a href=""></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb10-8"><a href=""></a>    <span class="at">names_from =</span> race,</span>
<span id="cb10-9"><a href=""></a>    <span class="at">values_from =</span> words</span>
<span id="cb10-10"><a href=""></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 5
  film                       sex      Elf Hobbit   Man
  &lt;chr&gt;                      &lt;chr&gt;  &lt;int&gt;  &lt;int&gt; &lt;int&gt;
1 The Fellowship Of The Ring female  1229     14     0
2 The Fellowship Of The Ring male     971   3644  1995
3 The Two Towers             female   331      0   401
4 The Two Towers             male     513   2463  3589
5 The Return Of The King     female   183      2   268
6 The Return Of The King     male     510   2673  2459</code></pre>
</div>
</div>
</section>
<section id="your-turn-2" class="slide level2 small">
<h2><em>Your Turn 2</em></h2>
<h3 id="use-pivot_wider-to-reorganize-table2-into-four-columns-country-year-cases-and-population.">Use <code>pivot_wider()</code> to reorganize <code>table2</code> into four columns: <code>country</code>, <code>year</code>, <code>cases</code>, and <code>population.</code></h3>
<h3 id="create-a-new-variable-called-prevalence-that-divides-cases-by-population-multiplied-by-100000.">Create a new variable called <code>prevalence</code> that divides <code>cases</code> by <code>population</code> multiplied by 100000.</h3>
<h3 id="pass-the-data-frame-to-a-ggplot.-make-a-scatter-plot-with-year-on-the-x-axis-and-prevalence-on-the-y-axis.-set-the-color-aesthetic-aes-to-country.-use-size-2-for-the-points.-add-a-line-geom.">Pass the data frame to a ggplot. Make a scatter plot with <code>year</code> on the x axis and <code>prevalence</code> on the y axis. Set the color aesthetic (<code>aes()</code>) to <code>country</code>. Use <code>size = 2</code> for the points. Add a line geom.</h3>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href=""></a>table2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="your-turn-2-1" class="slide level2">
<h2><em>Your Turn 2</em></h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb13" data-code-line-numbers="3-4,6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href=""></a>table2 <span class="sc">|&gt;</span></span>
<span id="cb13-2"><a href=""></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb13-3"><a href=""></a>    <span class="at">names_from =</span> type,</span>
<span id="cb13-4"><a href=""></a>    <span class="at">values_from =</span> count</span>
<span id="cb13-5"><a href=""></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb13-6"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">prevalence =</span> (cases <span class="sc">/</span> population) <span class="sc">*</span> <span class="dv">100000</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 5
  country      year  cases population prevalence
  &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;
1 Afghanistan  1999    745   19987071       3.73
2 Afghanistan  2000   2666   20595360      12.9 
3 Brazil       1999  37737  172006362      21.9 
4 Brazil       2000  80488  174504898      46.1 
5 China        1999 212258 1272915272      16.7 
6 China        2000 213766 1280428583      16.7 </code></pre>
</div>
</div>
</section>
<section id="your-turn-2-2" class="slide level2">
<h2><em>Your Turn 2</em></h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb15" data-code-line-numbers="7-10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href=""></a>table2 <span class="sc">|&gt;</span></span>
<span id="cb15-2"><a href=""></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb15-3"><a href=""></a>    <span class="at">names_from =</span> type,</span>
<span id="cb15-4"><a href=""></a>    <span class="at">values_from =</span> count</span>
<span id="cb15-5"><a href=""></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb15-6"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">prevalence =</span> (cases <span class="sc">/</span> population) <span class="sc">*</span> <span class="dv">100000</span>) <span class="sc">|&gt;</span></span>
<span id="cb15-7"><a href=""></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> prevalence, <span class="at">color =</span> country)) <span class="sc">+</span></span>
<span id="cb15-8"><a href=""></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb15-9"><a href=""></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb15-10"><a href=""></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">1999</span>L, <span class="dv">2000</span>L))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

</section>
<section id="your-turn-2-2-output" class="slide level2 output-location-slide"><h2><em>Your Turn 2</em></h2><div class="cell output-location-slide" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="tidyr_basics_files/figure-revealjs/unnamed-chunk-12-1.png" class="quarto-figure quarto-figure-center" style="width:80.0%"></p>
</figure>
</div>
</div>
</div></section><section id="your-turn-3" class="slide level2">
<h2><em>Your Turn 3</em></h2>
<h3 id="pivot-the-5th-through-60th-columns-of-who-so-that-the-names-of-the-columns-go-into-a-new-variable-called-codes-and-the-values-go-into-a-new-variable-called-n.-then-select-just-the-country-year-codes-and-n-variables.">Pivot the 5th through 60th columns of <code>who</code> so that the names of the columns go into a new variable called <code>codes</code> and the values go into a new variable called <code>n</code>. Then select just the <code>country</code>, <code>year</code>, <code>codes</code> and <code>n</code> variables.</h3>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href=""></a>who</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="your-turn-3-1" class="slide level2">
<h2><em>Your Turn 3</em></h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb17" data-code-line-numbers="3-5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href=""></a>who <span class="sc">|&gt;</span></span>
<span id="cb17-2"><a href=""></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb17-3"><a href=""></a>    <span class="at">names_to =</span> <span class="st">"codes"</span>,</span>
<span id="cb17-4"><a href=""></a>    <span class="at">values_to =</span> <span class="st">"n"</span>,</span>
<span id="cb17-5"><a href=""></a>    <span class="at">cols =</span> <span class="dv">5</span><span class="sc">:</span><span class="dv">60</span></span>
<span id="cb17-6"><a href=""></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb17-7"><a href=""></a>  <span class="fu">select</span>(country, year, codes, n)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

</section>
<section id="your-turn-3-1-output" class="slide level2 output-location-slide"><h2><em>Your Turn 3</em></h2><div class="cell output-location-slide" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 405,440 √ó 4
   country      year codes            n
   &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;        &lt;dbl&gt;
 1 Afghanistan  1980 new_sp_m014     NA
 2 Afghanistan  1980 new_sp_m1524    NA
 3 Afghanistan  1980 new_sp_m2534    NA
 4 Afghanistan  1980 new_sp_m3544    NA
 5 Afghanistan  1980 new_sp_m4554    NA
 6 Afghanistan  1980 new_sp_m5564    NA
 7 Afghanistan  1980 new_sp_m65      NA
 8 Afghanistan  1980 new_sp_f014     NA
 9 Afghanistan  1980 new_sp_f1524    NA
10 Afghanistan  1980 new_sp_f2534    NA
# ‚Ñπ 405,430 more rows</code></pre>
</div>
</div></section><section id="separateunite" class="slide level2">
<h2><code>separate()</code>/<code>unite()</code></h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href=""></a><span class="fu">separate</span>(</span>
<span id="cb19-2"><a href=""></a>  <span class="sc">&lt;</span>DATA<span class="sc">&gt;</span>,</span>
<span id="cb19-3"><a href=""></a>  <span class="sc">&lt;</span>VARIABLE<span class="sc">&gt;</span>,</span>
<span id="cb19-4"><a href=""></a>  <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"&lt;VARIABLE1&gt;"</span>, <span class="st">"&lt;VARIABLE2&gt;"</span>)</span>
<span id="cb19-5"><a href=""></a>)</span>
<span id="cb19-6"><a href=""></a></span>
<span id="cb19-7"><a href=""></a><span class="fu">unite</span>(<span class="sc">&lt;</span>DATA<span class="sc">&gt;</span>, <span class="sc">&lt;</span>VARIABLES<span class="sc">&gt;</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="your-turn-4" class="slide level2">
<h2><em>Your Turn 4</em></h2>
<h3 id="use-the-cases-data-below.-separate-the-sex_age-column-into-sex-and-age-columns.">Use the <code>cases</code> data below. Separate the <code>sex_age</code> column into <code>sex</code> and <code>age</code> columns.</h3>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href=""></a>cases <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb20-2"><a href=""></a>   <span class="sc">~</span>id,     <span class="sc">~</span>sex_age,</span>
<span id="cb20-3"><a href=""></a>   <span class="st">"1"</span>,    <span class="st">"male_56"</span>,</span>
<span id="cb20-4"><a href=""></a>   <span class="st">"2"</span>,  <span class="st">"female_77"</span>,</span>
<span id="cb20-5"><a href=""></a>   <span class="st">"3"</span>,  <span class="st">"female_49"</span></span>
<span id="cb20-6"><a href=""></a>)</span>
<span id="cb20-7"><a href=""></a><span class="fu">separate</span>(_______, _______, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"_______"</span>, <span class="st">"_______"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="your-turn-4-1" class="slide level2">
<h2><em>Your Turn 4</em></h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb21" data-code-line-numbers="7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href=""></a>cases <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb21-2"><a href=""></a>   <span class="sc">~</span>id,     <span class="sc">~</span>sex_age,</span>
<span id="cb21-3"><a href=""></a>   <span class="st">"1"</span>,    <span class="st">"male_56"</span>,</span>
<span id="cb21-4"><a href=""></a>   <span class="st">"2"</span>,  <span class="st">"female_77"</span>,</span>
<span id="cb21-5"><a href=""></a>   <span class="st">"3"</span>,  <span class="st">"female_49"</span></span>
<span id="cb21-6"><a href=""></a>)</span>
<span id="cb21-7"><a href=""></a><span class="fu">separate</span>(cases, sex_age, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"sex"</span>, <span class="st">"age"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 3
  id    sex    age  
  &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;
1 1     male   56   
2 2     female 77   
3 3     female 49   </code></pre>
</div>
</div>
</section>
<section id="your-turn-4-2" class="slide level2">
<h2><em>Your Turn 4</em></h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb23" data-code-line-numbers="7-12|11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href=""></a>cases <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb23-2"><a href=""></a>   <span class="sc">~</span>id,     <span class="sc">~</span>sex_age,</span>
<span id="cb23-3"><a href=""></a>   <span class="st">"1"</span>,    <span class="st">"male_56"</span>,</span>
<span id="cb23-4"><a href=""></a>   <span class="st">"2"</span>,  <span class="st">"female_77"</span>,</span>
<span id="cb23-5"><a href=""></a>   <span class="st">"3"</span>,  <span class="st">"female_49"</span></span>
<span id="cb23-6"><a href=""></a>)</span>
<span id="cb23-7"><a href=""></a><span class="fu">separate</span>(</span>
<span id="cb23-8"><a href=""></a>  cases,</span>
<span id="cb23-9"><a href=""></a>  sex_age,</span>
<span id="cb23-10"><a href=""></a>  <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"sex"</span>, <span class="st">"age"</span>),</span>
<span id="cb23-11"><a href=""></a>  <span class="at">convert =</span> <span class="cn">TRUE</span></span>
<span id="cb23-12"><a href=""></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell fragment" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 3
  id    sex      age
  &lt;chr&gt; &lt;chr&gt;  &lt;int&gt;
1 1     male      56
2 2     female    77
3 3     female    49</code></pre>
</div>
</div>
</section>
<section id="your-turn-5-challenge" class="slide level2 small">
<h2><em>Your Turn 5: Challenge!</em></h2>
<h3 id="there-are-two-csv-files-in-this-folder-containing-seer-data-in-breast-cancer-incidence-in-white-and-black-women.-for-both-sets-of-data">There are two CSV files in this folder containing SEER data in breast cancer incidence in white and black women. For both sets of data:</h3>
<h3 id="import-the-data">Import the data</h3>
<h3 id="pivot-the-columns-into-2-new-columns-called-year-and-incidence">Pivot the columns into 2 new columns called <code>year</code> and <code>incidence</code></h3>
<h3 id="add-a-new-variable-called-race.-remember-that-each-data-set-corresponds-to-a-single-race.">Add a new variable called <code>race</code>. Remember that each data set corresponds to a single race.</h3>
<h3 id="bind-the-data-sets-together-using-bind_rows-from-the-dplyr-package.-either-save-it-as-a-new-object-or-pipe-the-result-directly-into-the-ggplot2-code.">Bind the data sets together using <code>bind_rows()</code> from the dplyr package. Either save it as a new object or pipe the result directly into the ggplot2 code.</h3>
<h3 id="plot-the-data-using-the-code-below.-fill-in-the-blanks-to-have-year-on-the-x-axis-incidence-on-the-y-axis-and-race-as-the-color-aesthetic.">Plot the data using the code below. Fill in the blanks to have <code>year</code> on the x-axis, <code>incidence</code> on the y-axis, and <code>race</code> as the color aesthetic.</h3>
</section>
<section id="your-turn-5-no-solution" class="slide level2">
<h2><em>Your Turn 5: No solution</em> üòà</h2>

<img data-src="tidyr_basics_files/figure-revealjs/unnamed-chunk-19-1.png" class="quarto-figure quarto-figure-center r-stretch" style="width:80.0%"></section>
<section id="other-neat-tidyr-tools" class="slide level2">
<h2>Other neat tidyr tools</h2>
<h3 id="uncounting-frequency-tables">Uncounting frequency tables</h3>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb25" data-code-line-numbers="|7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href=""></a>lotr <span class="sc">|&gt;</span></span>
<span id="cb25-2"><a href=""></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb25-3"><a href=""></a>    <span class="at">names_to =</span> <span class="st">"sex"</span>,</span>
<span id="cb25-4"><a href=""></a>    <span class="at">values_to =</span> <span class="st">"count"</span>,</span>
<span id="cb25-5"><a href=""></a>    <span class="at">cols =</span> <span class="fu">c</span>(female, male)</span>
<span id="cb25-6"><a href=""></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb25-7"><a href=""></a>  <span class="fu">uncount</span>(count)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

</section>
<section id="other-neat-tidyr-tools-output" class="slide level2 output-location-slide"><h2>Other neat tidyr tools</h2><div class="cell output-location-slide" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 21,245 √ó 3
   film                       race  sex   
   &lt;chr&gt;                      &lt;chr&gt; &lt;chr&gt; 
 1 The Fellowship Of The Ring Elf   female
 2 The Fellowship Of The Ring Elf   female
 3 The Fellowship Of The Ring Elf   female
 4 The Fellowship Of The Ring Elf   female
 5 The Fellowship Of The Ring Elf   female
 6 The Fellowship Of The Ring Elf   female
 7 The Fellowship Of The Ring Elf   female
 8 The Fellowship Of The Ring Elf   female
 9 The Fellowship Of The Ring Elf   female
10 The Fellowship Of The Ring Elf   female
# ‚Ñπ 21,235 more rows</code></pre>
</div>
</div></section><section id="other-neat-tidyr-tools-1" class="slide level2">
<h2>Other neat tidyr tools</h2>
<h3 id="work-with-data-frames"><em>Work with data frames</em></h3>
<h4 id="crossing-and-expand"><code>crossing()</code> and <code>expand()</code></h4>
<h4 id="nest-and-unnest"><code>nest()</code> and <code>unnest()</code></h4>
</section>
<section id="other-neat-tidyr-tools-2" class="slide level2">
<h2>Other neat tidyr tools</h2>
<h3 id="work-with-missing-data"><em>Work with missing data</em></h3>
<h4 id="complete"><code>complete()</code></h4>
<h4 id="drop_na-and-replace_na"><code>drop_na()</code> and <code>replace_na()</code></h4>
</section>
<section id="resources" class="slide level2" data-background-color="#23373B">
<h2>Resources</h2>
<h3 id="r-for-data-science-a-comprehensive-but-friendly-introduction-to-the-tidyverse.-free-online."><a href="https://r4ds.hadley.nz/">R for Data Science</a>: A comprehensive but friendly introduction to the tidyverse. Free online.</h3>
<h3 id="posit-recipes-common-code-patterns-in-r-with-some-comparisons-to-sas"><a href="https://posit.cloud/learn/recipes">Posit Recipes</a>: Common code patterns in R (with some comparisons to SAS)</h3>

</section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">

</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="tidyr_basics_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="tidyr_basics_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="tidyr_basics_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="tidyr_basics_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="tidyr_basics_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="tidyr_basics_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="tidyr_basics_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="tidyr_basics_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="tidyr_basics_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="tidyr_basics_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":false},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: true,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'fade',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'fast',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'fade',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
            const codeEl = trigger.previousElementSibling.cloneNode(true);
            for (const childEl of codeEl.children) {
              if (isCodeAnnotation(childEl)) {
                childEl.remove();
              }
            }
            return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp('/' + window.location.host + '/');
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>